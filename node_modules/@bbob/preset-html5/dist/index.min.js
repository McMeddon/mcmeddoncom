!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).BbobPresetHTML5={})}(this,function(t){"use strict";let e=t=>"object"==typeof t&&!!t.tag;function n(t,n,o,r){n.walk(n=>e(n)&&t[n.tag]?t[n.tag](n,o,r):n)}let o=t=>"object"==typeof t&&!!t.tag,r=t=>"string"==typeof t,s=(t,e,n)=>Object.keys(t).reduce(e,n),i=t=>o(t)?t.content.reduce((t,e)=>t+i(e),0):r(t)?t.length:0,c=(t,e)=>{t.content.push(e)},a=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/(javascript|data|vbscript):/gi,"$1%3A"),l=(t,e)=>{let n=typeof e,o={boolean:()=>e?""+t:"",number:()=>`${t}="${e}"`,string:()=>`${t}="${a(e)}"`,object:()=>`${t}="${a(JSON.stringify(e))}"`};return o[n]?o[n]():""},u=t=>null==t?"":s(t,(e,n)=>[...e,l(n,t[n])],[""]).join(" "),g=t=>s(t,(e,n)=>t[n]===n?t[n]:null,null),p=(t,e)=>{let n=g(e);if(n){let o=l(t,n),r={...e};delete r[n];let s=u(r);return`${o}${s}`}return`${t}${u(e)}`};class f{attr(t,e){return void 0!==e&&(this.attrs[t]=e),this.attrs[t]}append(t){return c(this,t)}get length(){return i(this)}toTagStart({openTag:t="[",closeTag:e="]"}={}){let n=p(this.tag,this.attrs);return`${t}${n}${e}`}toTagEnd({openTag:t="[",closeTag:e="]"}={}){return`${t}/${this.tag}${e}`}toTagNode(){return new f(this.tag.toLowerCase(),this.attrs,this.content)}toString({openTag:t="[",closeTag:e="]"}={}){let n=0===this.content.length,o=this.content.reduce((n,o)=>n+o.toString({openTag:t,closeTag:e}),""),r=this.toTagStart({openTag:t,closeTag:e});return n?r:`${r}${o}${this.toTagEnd({openTag:t,closeTag:e})}`}constructor(t,e,n){this.tag=t,this.attrs=e,this.content=Array.isArray(n)?n:[n]}}f.create=(t,e={},n=[])=>new f(t,e,n),f.isOf=(t,e)=>t.tag===e;let d=(t,e)=>t[0]===e,h={color:t=>`color:${t};`,size:t=>`font-size:${t};`},$=t=>Object.keys(t).reduce((e,n)=>h[n]?e.concat(h[n](t[n])):e,[]).join(" "),b=t=>{let e=0,n=[],s=()=>f.create("li"),i=t=>{n[e]=n[e]||t},c=t=>{n[e]&&n[e].content?n[e].content=n[e].content.concat(t):n[e]=n[e].concat(t)};return t.forEach(t=>{r(t)&&d(t,"*")?(n[e]&&e++,i(s()),c(t.substr(1))):o(t)&&f.isOf(t,"*")?(n[e]&&e++,i(s())):o(n[e])?n[e]?c(t):i(t):(e++,i(t))}),[].concat(n)},y=(t,e)=>g(t.attrs)?g(t.attrs):e(t.content),j=(t,e,n)=>({tag:t,attrs:e,content:n}),T=t=>({style:t});var O=function t(e,o=n){let r=(t={})=>{r.options=Object.assign(r.options||{},t);let n=(t,n)=>o(e,t,n,r.options);return n.options=r.options,n};return r.extend=n=>t(n(e,r.options),o),r}({b:t=>j("span",T("font-weight: bold;"),t.content),i:t=>j("span",T("font-style: italic;"),t.content),u:t=>j("span",T("text-decoration: underline;"),t.content),s:t=>j("span",T("text-decoration: line-through;"),t.content),url:(t,{render:e},n)=>j("a",{href:y(t,e)},t.content),img:(t,{render:e})=>j("img",{src:e(t.content)},null),quote:t=>j("blockquote",{},[j("p",{},t.content)]),code:t=>j("pre",{},t.content),style:t=>j("span",T($(t.attrs)),t.content),list(t){let e=g(t.attrs);return j(e?"ol":"ul",e?{type:e}:{},b(t.content))}});t.default=O,Object.defineProperty(t,"__esModule",{value:!0})});
